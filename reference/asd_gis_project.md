ASD GIS：高性能二维/三维地图交互应用平台
平台简介
本应用是基于香港 CSDI 地图框架，与艾森斯数据进行融合的二维与三维可视化 GIS 平台。
一、核心技术架构
• 前端框架: Vue 3 + Vite + Vue Router
• 二维地图引擎: OpenLayers (ol)
• 三维地球引擎: Cesium
• UI 组件库: Element Plus
• 数据通信: 通过 PostMessage API 与艾森斯后端服务进行安全、高效的数据交换
二、核心交互功能模块
1. 地图基础视图
• 底图服务: 集成香港政府官方地图 API，支持平面图、矢量图、卫星影像及 3D Tiles 模型的无缝切换。
• 坐标系统: 支持 EPSG:3857（Web 墨卡托）与 EPSG:4326（WGS84）间的自动转换。香港本地坐标 HK80 由
艾森斯后台进行数据转换后再传入 GIS 平台。
• 初始视图: 默认以香港中心（114.19254, 22.38680）为焦点，支持 11-19 级的动态缩放（级别由艾森斯指定）。
2. 地理要素绘制与编辑
• 绘制工具: 提供点、线、面、矩形、文字标注、经纬度标注等丰富的图形绘制能力。
• 编辑功能: 支持对已绘制图形的顶点进行拖拽修改。
注：此模块的开通状态由艾森斯根据业务需求决定。
3. 精准测量工具
• 实时测量: 支持距离（折线）测量、多边形面积、圆形面积测量，测量结果随鼠标移动实时更新。
4. 空间数据管理与可视化
• 地块管理: 展示多边形边界、中心点图标及编号；支持完整的高亮与交互功能。
• 项目管理: 展示项目坐标点，使用 6 个阶段化图标，并绘制项目多边形。
• 层级关系: 清晰呈现“项目嵌套于地块”的空间从属逻辑，支持联动高亮。
5. 动态渲染优化策略
• 近距离视图（高度 < 1000 米）：展示详细的地块多边形。
• 远距离视图（高度 ≥ 1000 米）：优化为显示地块中心点图标，保障性能与清晰度。
• 项目图标：始终保持显示，确保核心信息可见。
6. 智能交互与定位
• 选择查询: 点击地块多边形，即时获取其 premises_id。
• 快速定位: 点击中心点图标，地图自动平滑飞升至对应地块范围。
• 要素高亮: 支持通过 ID 对指定地块或项目进行可视化高亮。
• 上下文菜单: 右键菜单集成绘制结束、编辑等快捷操作。
• 微型视图组件: 提供轻量化的地块/项目展示组件，专用于 Records-Hub 详情页嵌入。
7. 实用工具
• 地图截图: 支持自定义截图区域，可分别调整框内与框外地图样式，并导出高清 PNG 图片。
• 智能地块分析: 模拟 CSDI 官方工具，支持自定义地形范围，智能分析并高亮显示范围内或边界相交的地块
数据。
8. 跨应用通信协议 (PostMessage) 10 个接口
平台定义了完善的跨窗口消息接口，确保与艾森斯系统的深度集成：
• DrawPolygon / DrawProject: 绘制地块/项目数据
• RedrawPolygon / RedrawProject: 重绘要素
• SendPremisesId / SendProjectId: 定位至指定要素
• HighlightCoordinate / HighlightProjectCoordinate: 高亮指定要素
• GetStageType: 获取项目阶段类型
• MiniDrawPolygon / MiniDrawProject: 微型视图绘制
三、三维场景深化
1. 二维地图三维化: 在 Cesium 三维球体中无缝加载并展示二维业务地图。
2. 三维模型集成: 支持加载与渲染 3D Tiles 格式的精细建筑模型。
3. 模型数据管理: （开发中）提供界面以调整 3D 模型的地理位置与旋转角度，并将参数更新至艾森斯数据库。
四、前瞻性技术探索
• CSDI 超高清矢量地图集成: 针对建筑署未来有可能的高清制图需求，提前进行技术可行性预研。
o 现状评估：当前地图服务已满足基本业务需求，与艾森斯李工确认过。
o 下一步行动：计划就关键集成问题正式发函咨询 CSDI 官方，为未来升级铺平道路。